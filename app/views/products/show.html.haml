- content_for :title,  @product.store.to_s.gsub('_', ' ').titleize + ": " + @product.title.to_s.titleize
- content_for :head do
  %meta{content: @product.tags, name: "Keywords"}/
  %meta{content: @product.description, name: "Description"}/
%h3.panel= @product.title.titleize
.row
  .col-xs-12.col-sm-8.col-md-8
    -if @photos.count == 1
      .container-liquid
        .widewrapper
          =image_tag @photos.first.image.hdpi
          %p
    -else
      .slider
        -count = 1
        -@photos.each do |p|
          %input{:type => "radio", :name => "slide_switch", :id => p.id, :checked => ((count > 1) ? nil : "checked") }
          %label{:for => p.id}= image_tag p.image.thumb, style: 'width:100%;'
          =image_tag p.image.hdpi
          -count += 1
  .col-xs-12.col-sm-4.col-md-4.well
    = form_for @item, remote: true do |f|
      -if !@product.price.nil?
        %h4.text-right
          Price:
          %span= number_to_currency @product.price 
      -if @product.store == "optics" || @product.store == "guns"
        %table.table
          %tr
            %td Contact for more information
          %tr
            %td +1-903-768-2948
            %td= link_to "Call", "tel:+19037682948", class: "btn btn-primary"
          %tr
            %td customgun.tr@gmail.com
            %td= link_to "Email", "mailto:customgun.tr@gmail.com", class: "btn btn-primary"
      -else
        %h4.text-right
          -if !(@product.store == "optics" || @product.store == "guns")
            -if @product.quantity.to_i >= 1
              .input-group
                = f.select :quantity, options_for_select(1..@product.quantity), {}, class: "form-control"
                .input-group-btn
                  = f.hidden_field :product_id, value: @product.id
                  = f.submit "Add to Cart", class: "btn btn-primary"
            -else
              %span Sold Out
.row
  .panel.panel-default
    .panel-heading Product Description
    .panel-body= @product.description.gsub(/([a-z])((?:[^.?!]|\.(?=[a-z]))*)/i) { $1.upcase + $2.rstrip }.html_safe
    .panel-heading Product Information
    %table.table.panel-body
      -if(!@product.manufacturer.empty?)
        %tr
          %td Manufacturer:
          %td= @product.manufacturer.titleize
      -if(!@product.model.empty?)
        %tr
          %td Model:
          %td= @product.model.titleize
      -if(!@product.part_number.empty?)
        %tr
          %td Part Number:
          %td= @product.part_number.titleize
      -if(!@product.material.nil? && !@product.material.empty?)
        %tr
          %td Material:
          %td= @product.material.titleize
      -if(!@product.type_field.nil? && !@product.type_field.empty?)
        %tr
          %td Type:
          %td= @product.type_field.titleize
      -if(!@product.style_field.nil? && !@product.style_field.empty?)
        %tr
          %td Style:
          %td= @product.style_field.titleize
      -if(!@product.caliber.nil? && !@product.caliber.empty?)
        %tr
          %td Caliber/Gauge:
          %td= @product.caliber
      -if(!@product.length.nil? && @product.store == 'jewelry')
        %tr
          %td Length:
          %td= @product.length.to_s + " cm." + " / " + (@product.length/2.54).round(2).to_s + " in."
      -if(!@product.barrel_length.nil? && !@product.barrel_length.empty?)
        %tr
          %td Barrel Length:
          %td= @product.barrel_length.to_s + " in."
      -if(!@product.height.nil? && !@product.width.nil? && !@product.length.nil?)
        %tr
          %td Dimensions (L x W x H):
          %td= dimensions_as_cm(@product) + " / " + dimensions_as_inches(@product)
      -if(!@product.weight.nil?)
        %tr
          %td Weight:
          %td= weight_as_metric(@product).to_s + " / " + weight_as_imperial(@product).to_s
      -if(!@product.shipped_by.nil?)
        %tr
          %td Shipped by
          %td= @product.shipped_by.titleize

-if current_user.admin
  = link_to 'Edit', edit_product_path(@product), class: "btn btn-primary"
  \|
  = link_to 'Back', products_path, class: "btn btn-primary"
%br
%br
